---
title: "HW 5"
author: "Nhan Le"
date: "June 22, 2016"
output: html_document
---

## 1a
```{r 1a, echo=FALSE}
library(foreign)
library(nortest)
df <- read.dta("attend.dta")
df$dskipped <- ifelse(df$skipped > 0, 1, 0)
dskipped.glm.1a <- glm(df$dskipped~df$priGPA,family=binomial(link="probit"))
summary(dskipped.glm.1a)
```

dskipped = 3.3692 - 0.7586(priGPA)

Yes. Because the statistically significant slope for previous GPA is -0.7586, increase GPA is correlated with a decrease in skipping.

## 1b
```{r 1b, echo=FALSE}
coef.1b <- coef(dskipped.glm.1a)
coef.1b[1]+coef.1b[2]*3
coef.1b[1]+coef.1b[2]*3.9
```

The calculated probability to skip for 3.0 GPA is over 100% and for 3.9 GPA is 41.07%.

## 1c
```{r 1c, echo=FALSE}
dskipped.glm.1c <- glm(df$dskipped~df$priGPA+df$frosh+df$priGPA*df$frosh,family=binomial(link="probit"))
summary(dskipped.glm.1c)
```

dskipped = 3.5147 - 0.8810(priGPA)

The estimate for B1 changed from -0.7586 to -0.8110. The variable frosh is not statistically significant.

## 1d
```{r 1d, echo=FALSE}
coef.1d <- coef(dskipped.glm.1c)
coef.1d[1]+coef.1d[2]*3.5
##predict(dskipped.glm.1c, newdata=data.frame(priGPA=(3), frosh=(1)))
```

The probability of skipping is 67.62%.

## 1e
```{r 1e.a, echo=FALSE}
hist(df$priGPA, prob=TRUE)
curve(dnorm(x, mean=mean(df$priGPA), sd=sd(df$priGPA)), add=TRUE)
```

Because the histogram of priGPA exhibits roughly normal distribution, the probit model will likely be slightly more accurate. The logit model usually only excels when independent variables are extreme.

For reference, values obtained via the logit model are shown below.

```{r 1e.b, echo=FALSE}
dskipped.glm.from1a.1e <- glm(df$dskipped~df$priGPA,family=binomial(link="logit"))
summary(dskipped.glm.from1a.1e)
```

LOGIT: dskipped = 6.2072 - 1.4437(priGPA)

LOGIT for 1b: 187.61% for 3.0 GPA, 57.67% for 3.9 GPA

```{r 1e.c, echo=FALSE}
dskipped.glm.from1c.1e <- glm(df$dskipped~df$priGPA+df$frosh+df$priGPA*df$frosh,family=binomial(link="logit"))
summary(dskipped.glm.from1c.1e)
```

LOGIT: dskipped = 6.3800 - 1.5080(priGPA)

LOGIT for 1d: 101.20% for 3.5 GPA

## 2

The main advantage of panel data over cross-sectional data is the presence of more data points, which increases degrees of freedom and reduces collinearity between independent variables, thereby increasing efficiency of estimators. However, presence of more data points can also induce heterogeneity bias.